!function(){console.log('Welcome to use QPlayer 1.0.0');function t(t){!function(t,e){if(!(t.container instanceof HTMLElement))throw new Error("QPlayer need a HTMLElement container to run.");e.container=t.container;if(!Array.isArray(t.songList))throw new Error("QPlayer need a song list to play.");e.songList=t.songList;"function"==typeof t.audioBack?(e.mode=0,e.audioBack=t.audioBack):e.mode=1;if(t.sort){var i=["normal","repeat","random"],a=i.indexOf(t.sort);-1==a&&(a=0),e.playSort=i[a],e.playSortIndex=a}else e.playSort="normal",e.playSortIndex=0;e.lrc={0:"正在加载歌词..."},e.length=e.songList.length,e.showLrc=!1,e.loading=!1,e.autoplay=t.autoplay,e.colorL=t.color||"light",e.color=t.color||"light",e.colorfulBg=t.colorfulBg,e.canChangeSort=t.canChangeSort,e.canShowSongList=t.canShowSongList,e.rs=[]}(t,this),function(t,a){t.classList.add("qplayer"),a.oldClassName=t.className,t.innerHTML='<audio class="qp-audio"></audio><div class="bg"></div><div class="zl"><div class="img"><div class="playing-anim"><div></div><div></div><div></div></div><img src="https://image.gumengya.com/i/2023/10/15/652b46cf15392.png" alt=""></div><div class="message"><div class="glc"><div class="songdata"><div class="name">Song Name</div><div class="artist">Song Artist</div></div><div class="lrc"></div><div class="controls"><div class="last-btn btn"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16"><path d="M4 4a.5.5 0 0 1 1 0v3.248l6.267-3.636c.54-.313 1.232.066 1.232.696v7.384c0 .63-.692 1.01-1.232.697L5 8.753V12a.5.5 0 0 1-1 0z"></path></svg></div><div class="play-btn btn"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="pause" viewBox="0 0 16 16"><path d="M6 3.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V4a.5.5 0 0 1 .5-.5m4 0a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V4a.5.5 0 0 1 .5-.5"></path></svg><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="play" viewBox="0 0 16 16"><path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"></path></svg></div><div class="next-btn btn"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16"><path d="M12.5 4a.5.5 0 0 0-1 0v3.248L5.233 3.612C4.693 3.3 4 3.678 4 4.308v7.384c0 .63.692 1.01 1.233.697L11.5 8.753V12a.5.5 0 0 0 1 0z"></path></svg></div></div></div><div class="blc"><div class="range"><div class="a"></div><div class="b"></div></div><div class="time">00:00/00:00</div><div class="sort-btn btn"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="random" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M0 3.5A.5.5 0 0 1 .5 3H1c2.202 0 3.827 1.24 4.874 2.418.49.552.865 1.102 1.126 1.532.26-.43.636-.98 1.126-1.532C9.173 4.24 10.798 3 13 3v1c-1.798 0-3.173 1.01-4.126 2.082A9.6 9.6 0 0 0 7.556 8a9.6 9.6 0 0 0 1.317 1.918C9.828 10.99 11.204 12 13 12v1c-2.202 0-3.827-1.24-4.874-2.418A10.6 10.6 0 0 1 7 9.05c-.26.43-.636.98-1.126 1.532C4.827 11.76 3.202 13 1 13H.5a.5.5 0 0 1 0-1H1c1.798 0 3.173-1.01 4.126-2.082A9.6 9.6 0 0 0 6.444 8a9.6 9.6 0 0 0-1.317-1.918C4.172 5.01 2.796 4 1 4H.5a.5.5 0 0 1-.5-.5"/><path d="M13 5.466V1.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192m0 9v-3.932a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192"/></svg><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="repeat" viewBox="0 0 16 16"><path d="M11 4v1.466a.25.25 0 0 0 .41.192l2.36-1.966a.25.25 0 0 0 0-.384l-2.36-1.966a.25.25 0 0 0-.41.192V3H5a5 5 0 0 0-4.48 7.223.5.5 0 0 0 .896-.446A4 4 0 0 1 5 4zm4.48 1.777a.5.5 0 0 0-.896.446A4 4 0 0 1 11 12H5.001v-1.466a.25.25 0 0 0-.41-.192l-2.36 1.966a.25.25 0 0 0 0 .384l2.36 1.966a.25.25 0 0 0 .41-.192V13h6a5 5 0 0 0 4.48-7.223Z"></path><path d="M9 5.5a.5.5 0 0 0-.854-.354l-1.75 1.75a.5.5 0 1 0 .708.708L8 6.707V10.5a.5.5 0 0 0 1 0z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="normal" viewBox="0 0 16 16"><path d="M11 4v1.466a.25.25 0 0 0 .41.192l2.36-1.966a.25.25 0 0 0 0-.384l-2.36-1.966a.25.25 0 0 0-.41.192V3H5a5 5 0 0 0-4.48 7.223.5.5 0 0 0 .896-.446A4 4 0 0 1 5 4zm4.48 1.777a.5.5 0 0 0-.896.446A4 4 0 0 1 11 12H5.001v-1.466a.25.25 0 0 0-.41-.192l-2.36 1.966a.25.25 0 0 0 0 .384l2.36 1.966a.25.25 0 0 0 .41-.192V13h6a5 5 0 0 0 4.48-7.223Z"></path></svg></div><div class="lrc-btn btn"><span>词</span></div><div class="list-btn btn"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16"><path d="M12 13c0 1.105-1.12 2-2.5 2S7 14.105 7 13s1.12-2 2.5-2 2.5.895 2.5 2"></path><path fill-rule="evenodd" d="M12 3v10h-1V3z"></path><path d="M11 2.82a1 1 0 0 1 .804-.98l3-.6A1 1 0 0 1 16 2.22V4l-5 1z"></path><path fill-rule="evenodd" d="M0 11.5a.5.5 0 0 1 .5-.5H4a.5.5 0 0 1 0 1H.5a.5.5 0 0 1-.5-.5m0-4A.5.5 0 0 1 .5 7H8a.5.5 0 0 1 0 1H.5a.5.5 0 0 1-.5-.5m0-4A.5.5 0 0 1 .5 3H8a.5.5 0 0 1 0 1H.5a.5.5 0 0 1-.5-.5"></path></svg></div></div></div></div><div class="music-list"></div>',a.audio=t.querySelector("audio.qp-audio"),a.cover=t.querySelector(".img img"),a.name_f=t.querySelector(".songdata .name"),a.artist_f=t.querySelector(".songdata .artist"),0==a.canChangeSort&&t.querySelector(".sort-btn").classList.add("disabled");if(0==a.canShowSongList)t.querySelector(".list-btn").classList.add("disabled");else{var n=t.querySelector(".music-list");a.songList.forEach((function(t,e){var i=document.createElement("div");i.classList.add("item"),i.innerHTML='<span class="_index">'+e+'</span><span class="_title"></span>',n.append(i),i.querySelector("._title").innerText=i.title=t.artist+" - "+t.name,i.onclick=function(){a.play(parseInt(this.querySelector("._index").innerHTML))}}))}i(a.cover,"error",(function(){"https://image.gumengya.com/i/2023/10/15/652b46cf15392.png"!=this.src&&(this.src="https://image.gumengya.com/i/2023/10/15/652b46cf15392.png")})),i(a.audio,"play",(function(){a.gClassName()})),i(a.audio,"pause",(function(){a.gClassName()})),i(a.audio,"canplay",(function(){if(a.loading=!1,a.gClassName(),a._firstPlayed||a.autoplay)try{this.play()}catch(t){}else a._firstPlayed=!0})),i(a.audio,"ended",(function(){"repeat"==a.playSort?(this.currentTime=0,this.play()):a.next()})),i(a.audio,"waiting",(function(){a.loading=!0,a.gClassName()})),i(a.audio,"playing",(function(){a.loading=!1,a.gClassName()}));var r=t.querySelector(".range .a"),o=t.querySelector(".time"),l=t.querySelector(".range .b"),c=!1;i(a.audio,"timeupdate",(function(){o.innerText=e(this.currentTime/60)+":"+e(this.currentTime%60)+"/"+e(this.duration/60)+":"+e(this.duration%60);var i="";for(var n in a.lrc)this.currentTime>=n&&(i=a.lrc[n]);t.querySelector(".lrc").innerText=i,c||(r.style.width=this.currentTime/this.duration*100+"%",l.style.left="calc("+this.currentTime/this.duration*100+"% - 5px)")})),i(t.querySelector(".play-btn"),"click",(function(){a.audio.paused?a.play():a.pause()})),i(t.querySelector(".lrc-btn"),"click",(function(){a.showLrc=!a.showLrc,a.gClassName()})),i(t.querySelector(".last-btn"),"click",(function(){a.last()})),i(t.querySelector(".next-btn"),"click",(function(){a.next()})),i(t.querySelector(".sort-btn"),"click",(function(){a.setSort(2==a.playSortIndex?0:a.playSortIndex+1)})),i(t.querySelector(".list-btn"),"click",(function(){if(a.showmusiclist=!a.showmusiclist,a.gClassName(),a.showmusiclist){var t=a.container.querySelector(".music-list .item.active");t&&s(t)}})),i(t.querySelector(".range"),"click",(function(t){var e=t.pageX,i=this.getBoundingClientRect();a.audio.currentTime=(e-i.left)/i.width*a.audio.duration})),i(l,"mousedown",(function(e){var i=t.querySelector(".range").getBoundingClientRect();function n(t){var e=t.pageX-i.left;e<0?e=0:e>i.width&&(e=i.width),r.style.width=e/i.width*100+"%",l.style.left="calc("+e/i.width*100+"% - 5px)"}function s(t){c=!1;var e=t.pageX-i.left;e<0?e=0:e>i.width&&(e=i.width),a.audio.currentTime=e/i.width*a.audio.duration,document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",s)}c=!0,document.addEventListener("mousemove",n),document.addEventListener("mouseup",s)})),i(l,"touchstart",(function(e){var i,n=t.querySelector(".range").getBoundingClientRect();function s(t){i=t.targetTouches[0].pageX,d=i-n.left,d<0?d=0:d>n.width&&(d=n.width),r.style.width=d/n.width*100+"%",l.style.left="calc("+d/n.width*100+"% - 5px)"}function o(t){c=!1;var e=i-n.left;e<0?e=0:e>n.width&&(e=n.width),a.audio.currentTime=e/n.width*a.audio.duration,document.removeEventListener("touchmove",s),document.removeEventListener("touchend",o)}c=!0,document.addEventListener("touchmove",s),document.addEventListener("touchend",o)}))}(this.container,this),this.gClassName(),"random"==t.start?this.play(Math.floor(Math.random()*this.length)):"number"==typeof t.start&&t.start<=this.length-1?this.play(parseInt(t.start)):this.play(0)}function e(t){return t=isNaN(t)?0:t,(t=parseInt(t))<10?"0"+t:t}function i(t,e,i){t.addEventListener(e,i)}function a(t){var e=[];if(0!=(t=t||"[00:00.00] 暂无歌词").length){var i=t.split("\n");for(var a in i){i[a]=i[a].replace(/(^\s*)|(\s*$)/g,"");var n=i[a].substring(i[a].indexOf("[")+1,i[a].indexOf("]")).split(":");if(!isNaN(parseInt(n[0]))){var s=i[a].match(/\[(\d+:.+?)\]/g),r=0;for(var o in s)r+=s[o].length;var l=i[a].substring(r);for(var o in s){n=s[o].substring(1,s[o].length-1).split(":");e.push({t:(60*parseFloat(n[0])+parseFloat(n[1])).toFixed(3),c:l})}}}e.sort((function(t,e){return t.t-e.t}));var c={};return e.forEach((function(t){c[t.t]=t.c})),c}}function n(t,e,i){if(-1!=t.indexOf("y.gtimg.cn"))return void n();let a=document.createElement("img");function n(){i.rs.push(function(t,e){var i=new XMLHttpRequest;i.open("GET",t,!0);var a=setTimeout((function(){i.abort(),e(!1)}),5e3);i.onreadystatechange=function(){if(4===i.readyState&&200===i.status){k=i.responseText;try{k=JSON.parse(k)}catch(t){}clearTimeout(a),e(k)}else i.status>400&&(clearTimeout(a),e(!1))},i.onerror=function(){clearTimeout(a),e(!1)};try{i.send()}catch(t){}return{abort:function(){i.abort()}}}("https://api.qjqq.cn/api/Imgcolor?img="+t,(function(t){if(t){var i=t.RGB.slice(1),a=parseInt(i.substring(0,2),16),n=parseInt(i.substring(2,4),16),s=parseInt(i.substring(4,6),16);e("rgba("+a+","+n+","+s+",.5)",(a+n+s)/3>128)}else e("rgba(0,0,0,0)",-1)})))}a.src=t,a.crossOrigin="Anonymous",a.onload=function(){try{let t,i,n,s,r=document.createElement("canvas"),o=r.getContext&&r.getContext("2d"),l=-4,c=50,d=0,u={r:0,g:0,b:0};for(t=r.height=a.height,i=r.width=a.width,o.drawImage(a,0,0),s=o.getImageData(0,0,i,t).data,n=s.length;(l+=4*c)<n;)++d,u.r+=s[l],u.g+=s[l+1],u.b+=s[l+2];u.r=~~(u.r/d),u.g=~~(u.g/d),u.b=~~(u.b/d),e("rgba("+u.r+","+u.g+","+u.b+",.5)",(u.r+u.g+u.b)/3>128)}catch(t){n()}},a.onerror=function(){n()}}function s(t){var e=parseInt(t.querySelector("span._index").innerText.trim()),i=t.parentElement,a=30*e-i.clientHeight/2-15;i.scrollHeight<a?a=i.scrollHeight:a<0&&(a=0),i.scrollTo({top:a,behavior:"smooth"})}t.prototype={play:function(t){if("number"!=typeof t||t<0)this.audio.play();else{if(this.rs.length>0&&(this.rs.forEach((function(t){t.abort()})),this.rs=[]),t=parseInt(t),0!=this.canShowSongList){var e=this.container.querySelector(".music-list .item.active");e&&e.classList.remove("active");try{this.container.querySelectorAll(".music-list .item")[t].classList.add("active")}catch(t){}if(this.showmusiclist)s(this.container.querySelector(".music-list .item.active"))}this.audio.pause(),this.playIndex=t;var i,r=this.songList[t];if(this.name_f.innerText=r.name,this.name_f.title=r.name,this.artist_f.innerText=r.artist,this.artist_f.title=r.artist,this.cover.src="https://image.gumengya.com/i/2023/10/15/652b46cf15392.png",this.loading=!0,0==this.mode)(i=this).rs.push(i.audioBack(t,{cover:function(t){i.cover.src=t,"auto"==i.colorL&&n(t,(function(t,e){i.colorfulBg&&(i.container.style.backgroundColor=t),i.color=e?"light":"dark",i.gClassName()}),i)},audio:function(t){i.audio.src=t},lyric:function(t){i.lrc=a(t)},err:function(){setTimeout((function(){i.next()}),5e3)}}));else this.cover.src=r.img,this.audio.src=r.url,this.lrc=a(r.lrc),"auto"==(i=this).colorL&&n(r.img,(function(t,e){i.colorfulBg&&(i.container.style.backgroundColor=t),i.color=e?"light":"dark",i.gClassName()}),i)}this.gClassName()},pause:function(){this.audio.pause()},next:function(){"random"==this.playSort?this.play(Math.floor(Math.random()*this.length)):this.play(this.playIndex==this.length-1?0:this.playIndex+1)},last:function(){"random"==this.playSort?this.play(Math.floor(Math.random()*this.length)):this.play(0==this.playIndex?this.length-1:this.playIndex-1)},setSort:function(t){this.playSort=["normal","repeat","random"][t],this.playSortIndex=t,this.gClassName()},gClassName:function(){this.container.className=this.oldClassName+(this.showmusiclist?" show-musiclist":"")+("dark"==this.color?" dark":"")+(this.loading?" loading":"")+(this.showLrc?" showlrc":"")+(this.audio.paused?"":" playing")+" sort-"+this.playSort}},window.QPlayer=t}();